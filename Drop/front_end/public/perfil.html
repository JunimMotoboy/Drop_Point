<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - DropPoint</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/perfil.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <button onclick="window.location.href='dashboardUsuario.html'" class="btn-back" aria-label="Voltar ao dashboard">
                ‚Üê
            </button>
            <div class="header-title">
                <h1>Meu Perfil</h1>
                <p>Gerencie suas informa√ß√µes e prefer√™ncias</p>
            </div>
            <button class="save-all-btn" onclick="saveAllChanges()" id="saveAllBtn" style="display: none;">
                üíæ Salvar
            </button>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <!-- Perfil do Usu√°rio -->
            <div class="profile-section">
                <div class="profile-header">
                    <div class="avatar-section">
                        <div class="avatar-container">
                            <img src="../img/user-avatar.png" alt="Avatar" id="userAvatar" class="user-avatar">
                            <div class="avatar-placeholder" id="avatarPlaceholder">üë§</div>
                            <button class="change-avatar-btn" onclick="changeAvatar()">üì∑</button>
                        </div>
                        <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                    </div>
                    
                    <div class="profile-info">
                        <div class="editable-field">
                            <label>Nome Completo</label>
                            <input type="text" id="userName" class="profile-input" placeholder="Seu nome completo">
                        </div>
                        
                        <div class="editable-field">
                            <label>E-mail</label>
                            <input type="email" id="userEmail" class="profile-input" placeholder="seu@email.com">
                        </div>
                        
                        <div class="editable-field">
                            <label>Telefone</label>
                            <input type="tel" id="userPhone" class="profile-input" placeholder="(11) 99999-9999">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Endere√ßos Favoritos -->
            <div class="favorites-section">
                <div class="section-header">
                    <h2>üìç Endere√ßos Favoritos</h2>
                    <button class="add-btn" onclick="addFavoriteAddress()">+ Adicionar</button>
                </div>
                
                <div class="favorites-list" id="favoritesList">
                    <!-- Endere√ßos ser√£o carregados aqui -->
                </div>
            </div>

            <!-- Prefer√™ncias de Entrega -->
            <div class="preferences-section">
                <h2>‚öôÔ∏è Prefer√™ncias de Entrega</h2>
                
                <div class="preference-group">
                    <h3>Notifica√ß√µes</h3>
                    <div class="preference-item">
                        <label class="switch">
                            <input type="checkbox" id="pushNotifications" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="preference-info">
                            <span class="preference-label">Notifica√ß√µes Push</span>
                            <span class="preference-desc">Receber atualiza√ß√µes em tempo real</span>
                        </div>
                    </div>
                    
                    <div class="preference-item">
                        <label class="switch">
                            <input type="checkbox" id="smsNotifications">
                            <span class="slider"></span>
                        </label>
                        <div class="preference-info">
                            <span class="preference-label">SMS</span>
                            <span class="preference-desc">Receber SMS sobre entregas</span>
                        </div>
                    </div>
                    
                    <div class="preference-item">
                        <label class="switch">
                            <input type="checkbox" id="emailNotifications" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="preference-info">
                            <span class="preference-label">E-mail</span>
                            <span class="preference-desc">Receber resumos por e-mail</span>
                        </div>
                    </div>
                </div>
                
                <div class="preference-group">
                    <h3>Entrega</h3>
                    <div class="preference-item">
                        <label class="switch">
                            <input type="checkbox" id="fastDelivery" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="preference-info">
                            <span class="preference-label">Entrega Expressa</span>
                            <span class="preference-desc">Priorizar velocidade (custo adicional)</span>
                        </div>
                    </div>
                    
                    <div class="preference-item">
                        <label class="switch">
                            <input type="checkbox" id="ecoDelivery">
                            <span class="slider"></span>
                        </label>
                        <div class="preference-info">
                            <span class="preference-label">Entrega Eco</span>
                            <span class="preference-desc">Priorizar sustentabilidade</span>
                        </div>
                    </div>
                </div>
                
                <div class="preference-group">
                    <h3>Pagamento Padr√£o</h3>
                    <div class="payment-methods">
                        <label class="payment-option">
                            <input type="radio" name="defaultPayment" value="credit" checked>
                            <span class="payment-card">
                                <div class="payment-icon">üí≥</div>
                                <div class="payment-info">
                                    <span>Cart√£o de Cr√©dito</span>
                                    <small>**** 1234</small>
                                </div>
                            </span>
                        </label>
                        
                        <label class="payment-option">
                            <input type="radio" name="defaultPayment" value="pix">
                            <span class="payment-card">
                                <div class="payment-icon">üì±</div>
                                <div class="payment-info">
                                    <span>PIX</span>
                                    <small>Instant√¢neo</small>
                                </div>
                            </span>
                        </label>
                        
                        <label class="payment-option">
                            <input type="radio" name="defaultPayment" value="cash">
                            <span class="payment-card">
                                <div class="payment-icon">üíµ</div>
                                <div class="payment-info">
                                    <span>Dinheiro</span>
                                    <small>Na entrega</small>
                                </div>
                            </span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Estat√≠sticas Pessoais -->
            <div class="stats-section">
                <h2>üìä Suas Estat√≠sticas</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üì¶</div>
                        <div class="stat-value" id="totalDeliveries">0</div>
                        <div class="stat-label">Entregas Realizadas</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-value" id="totalSpent">R$ 0</div>
                        <div class="stat-label">Total Gasto</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-value" id="avgRating">0.0</div>
                        <div class="stat-label">Avalia√ß√£o M√©dia</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üå±</div>
                        <div class="stat-value" id="carbonSaved">0kg</div>
                        <div class="stat-label">CO‚ÇÇ Economizado</div>
                    </div>
                </div>
            </div>

            <!-- A√ß√µes da Conta -->
            <div class="account-actions">
                <h2>üîê Conta e Seguran√ßa</h2>
                <div class="action-buttons">
                    <button class="action-btn primary" onclick="changePassword()">
                        üîë Alterar Senha
                    </button>
                    <button class="action-btn secondary" onclick="exportData()">
                        üì§ Exportar Dados
                    </button>
                    <button class="action-btn secondary" onclick="deleteAccount()">
                        üóëÔ∏è Excluir Conta
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal para Adicionar Endere√ßo -->
    <div id="addressModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Adicionar Endere√ßo Favorito</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addressForm">
                    <div class="form-group">
                        <label for="addressName">Nome do Endere√ßo</label>
                        <input type="text" id="addressName" placeholder="Ex: Casa, Trabalho, Academia" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="addressStreet">Endere√ßo Completo</label>
                        <input type="text" id="addressStreet" placeholder="Rua, N√∫mero, Complemento" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="addressNeighborhood">Bairro</label>
                            <input type="text" id="addressNeighborhood" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="addressCity">Cidade</label>
                            <input type="text" id="addressCity" value="S√£o Paulo" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="addressNotes">Observa√ß√µes (opcional)</label>
                        <textarea id="addressNotes" placeholder="Ponto de refer√™ncia, instru√ß√µes especiais..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal()">Cancelar</button>
                <button class="btn-primary" onclick="saveFavoriteAddress()">Salvar Endere√ßo</button>
            </div>
        </div>
    </div>

    <script src="../script/perfil.js"></script>
</body>
</html>