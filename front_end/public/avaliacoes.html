<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avalia√ß√µes - DropPoint</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/avaliacoes.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <button class="btn-back" onclick="goBack()">
                ‚Üê
            </button>
            <div class="header-title">
                <h1>Avalia√ß√µes</h1>
                <p>Compartilhe sua experi√™ncia</p>
            </div>
            <div class="header-stats">
                <span class="rating-badge" id="userRating">‚≠ê 4.8</span>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <!-- Se√ß√£o de Avalia√ß√£o Pendente -->
            <div class="pending-evaluations" id="pendingEvaluations">
                <h2>Aguardando Sua Avalia√ß√£o</h2>
                <div class="evaluation-cards" id="pendingCards">
                    <!-- Cards ser√£o carregados via JavaScript -->
                </div>
            </div>

            <!-- Filtros e Busca -->
            <div class="filter-section">
                <div class="filter-header">
                    <h2>Suas Avalia√ß√µes</h2>
                    <div class="filter-controls">
                        <select id="filterType" class="filter-select">
                            <option value="all">Todas</option>
                            <option value="delivery">Entrega</option>
                            <option value="motoboy">Motoboy</option>
                            <option value="app">Aplicativo</option>
                        </select>
                        <select id="filterRating" class="filter-select">
                            <option value="all">Todas as notas</option>
                            <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
                            <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option>
                            <option value="3">‚≠ê‚≠ê‚≠ê</option>
                            <option value="2">‚≠ê‚≠ê</option>
                            <option value="1">‚≠ê</option>
                        </select>
                        <button class="new-review-btn" onclick="openGeneralReviewModal()">
                            + Nova Avalia√ß√£o
                        </button>
                    </div>
                </div>
            </div>

            <!-- Lista de Avalia√ß√µes -->
            <div class="evaluations-list" id="evaluationsList">
                <!-- Avalia√ß√µes ser√£o carregadas via JavaScript -->
            </div>

            <!-- Estat√≠sticas de Avalia√ß√£o -->
            <div class="evaluation-stats">
                <h2>Suas Estat√≠sticas</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-value" id="totalEvaluations">0</div>
                        <div class="stat-label">Total de Avalia√ß√µes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-value" id="averageRating">0.0</div>
                        <div class="stat-label">Nota M√©dia Dada</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-value" id="helpfulReviews">0</div>
                        <div class="stat-label">Avalia√ß√µes √öteis</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-value" id="improvementImpact">0</div>
                        <div class="stat-label">Melhorias Implementadas</div>
                    </div>
                </div>
            </div>

            <!-- Insights e Recomenda√ß√µes -->
            <div class="insights-section">
                <h2>Insights Baseados em Suas Avalia√ß√µes</h2>
                <div class="insights-grid" id="insightsGrid">
                    <!-- Insights ser√£o carregados via JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <!-- Modal de Avalia√ß√£o -->
    <div id="evaluationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Avaliar Entrega</h2>
                <button class="modal-close" onclick="closeEvaluationModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="evaluationForm">
                    <!-- Informa√ß√µes do Pedido/Servi√ßo -->
                    <div class="evaluation-item-info" id="evaluationItemInfo">
                        <!-- Ser√° preenchido dinamicamente -->
                    </div>

                    <!-- Avalia√ß√£o Geral -->
                    <div class="rating-section">
                        <label>Avalia√ß√£o Geral</label>
                        <div class="star-rating" data-rating="overall">
                            <span class="star" data-value="1">‚≠ê</span>
                            <span class="star" data-value="2">‚≠ê</span>
                            <span class="star" data-value="3">‚≠ê</span>
                            <span class="star" data-value="4">‚≠ê</span>
                            <span class="star" data-value="5">‚≠ê</span>
                        </div>
                        <span class="rating-text" id="overallRatingText">Clique nas estrelas para avaliar</span>
                    </div>

                    <!-- Aspectos Espec√≠ficos -->
                    <div class="aspects-rating" id="aspectsRating">
                        <!-- Ser√° preenchido baseado no tipo de avalia√ß√£o -->
                    </div>

                    <!-- Coment√°rios -->
                    <div class="form-group">
                        <label for="evaluationComment">Coment√°rios (opcional)</label>
                        <textarea 
                            id="evaluationComment" 
                            name="comment" 
                            placeholder="Compartilhe detalhes sobre sua experi√™ncia..."
                            rows="4"
                        ></textarea>
                    </div>

                    <!-- Tags de Feedback -->
                    <div class="feedback-tags">
                        <label>O que mais se destacou? (opcional)</label>
                        <div class="tags-container" id="feedbackTags">
                            <!-- Tags ser√£o carregadas baseadas no tipo -->
                        </div>
                    </div>

                    <!-- Sugest√µes de Melhoria -->
                    <div class="form-group">
                        <label for="suggestions">Sugest√µes de Melhoria (opcional)</label>
                        <textarea 
                            id="suggestions" 
                            name="suggestions" 
                            placeholder="Como podemos melhorar nosso servi√ßo?"
                            rows="3"
                        ></textarea>
                    </div>

                    <!-- Recomenda√ß√£o -->
                    <div class="recommendation-section">
                        <label>Voc√™ recomendaria nosso servi√ßo?</label>
                        <div class="recommendation-options">
                            <label class="recommendation-option">
                                <input type="radio" name="recommend" value="yes">
                                <span class="option-text">üëç Sim, recomendaria</span>
                            </label>
                            <label class="recommendation-option">
                                <input type="radio" name="recommend" value="maybe">
                                <span class="option-text">ü§î Talvez</span>
                            </label>
                            <label class="recommendation-option">
                                <input type="radio" name="recommend" value="no">
                                <span class="option-text">üëé N√£o recomendaria</span>
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeEvaluationModal()">Cancelar</button>
                <button type="button" class="btn-primary" onclick="submitEvaluation()">Enviar Avalia√ß√£o</button>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes da Avalia√ß√£o -->
    <div id="evaluationDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Detalhes da Avalia√ß√£o</h2>
                <button class="modal-close" onclick="closeDetailsModal()">&times;</button>
            </div>
            <div class="modal-body" id="evaluationDetailsContent">
                <!-- Conte√∫do ser√° carregado dinamicamente -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeDetailsModal()">Fechar</button>
                <button type="button" class="btn-primary" onclick="editEvaluation()">Editar Avalia√ß√£o</button>
            </div>
        </div>
    </div>

    <script src="../script/navigation.js"></script>
    <script src="../script/utils.js"></script>
    <script src="../script/avaliacoes.js"></script>
</body>
</html>